server:
  port: 8190 #运行端口号

spring:
  application:
    name: dmall-service-impl-member #服务名称
  #数据库配置
  datasource:
    driver-class-name: com.mysql.cj.jdbc.Driver
    url: jdbc:mysql://106.15.188.249:3306/dmall_mms?allowMultiQueries=true&useUnicode=true&characterEncoding=UTF-8&useSSL=false&serverTimezone=GMT%2B8
    username: root
    password: f088df87e10c40fe804c54e88d54b8e4
    # 使用druid数据源
    type: com.alibaba.druid.pool.DruidDataSource
    druid:
      # 配置测试查询语句, #Oracle需要打开注释
      validationQuery: SELECT 1 FROM DUAL
      # 初始化大小，最小，最大
      initialSize: 10
      minIdle: 10
      maxActive: 200
      # 配置一个连接在池中最小生存的时间，单位是毫秒
      minEvictableIdleTimeMillis: 180000
      testOnBorrow: false
      testWhileIdle: true
      removeAbandoned: true
      removeAbandonedTimeout: 1800
      logAbandoned: true
      # 打开PSCache，并且指定每个连接上PSCache的大小
      poolPreparedStatements: true
      maxOpenPreparedStatements: 100
      # 配置监控统计拦截的filters，去掉后监控界面sql无法统计，'wall'用于防火墙
      filters: stat,wall
      # 通过connectProperties属性来打开mergeSql功能；慢SQL记录
      connectionProperties: druid.stat.mergeSql=true;druid.stat.slowSqlMillis=5000

      # WebStatFilter配置，说明请参考Druid Wiki，配置_配置WebStatFilter
      # 是否启用StatFilter默认值true
      web-stat-filter:
        enabled: true
        url-pattern: /*
        exclusions: "*.js,*.gif,*.jpg,*.png,*.css,*.ico,/druid/*"
        session-stat-enable: false
        session-stat-max-count: 1000
        principal-cookie-name: admin
        principal-session-name: admin
        profile-enable: true
      # 根据配置中的url-pattern来访问内置监控页面，如果是上面的配置，内置监控页面的首页是/druid/index.html
      # http://loacalhsot:8081/druid
      stat-view-servlet:
        url-pattern: /druid/*  # 监控页面访问路径
        # 允许清空统计数据
        reset-enable: true
        login-username: dmall
        login-password: admin123456
  # redis配置
  redis:
    host: 106.15.188.249
    port: 6379
    password: adbbb1182b6e4a94a4a43e09a8b2eafb
    lettuce:
      pool:
        max-active: 8 #连接池最大连接数
        max-idle: 8 #最大空闲数
        min-idle: 0 #最小空闲数
        max-wait: 1000ms #最大阻塞等待时间（使用负值表示没有限制）
    timeout: 1000ms
  zipkin:
    base-url: http://www.dmall.com:9411

eureka:
  client:
    register-with-eureka: true #注册到Eureka的注册中心
    fetch-registry: true #获取注册实例列表
    service-url:
      defaultZone: http://dmall:admin123456@www.dmall.com:7000/eureka/,http://dmall:admin123456@dmall1:7001/eureka/ #配置注册中心地址
    healthcheck:
      enabled: true #开启健康检查
  instance:
    prefer-ip-address: true #采用IP注册
    instance-id: ${spring.application.name}:${spring.cloud.client.ip-address}:${server.port} #定义实例ID格式
    lease-renewal-interval-in-seconds: 30 #定义服务多久去注册中心续约
    lease-expiration-duration-in-seconds: 90 #定义服务多久不去续约认为服务失效

feign:
  hystrix:
    enabled: true #在Feign中开启Hystrix
  client:
    config:
      default:
        connectTimeout: 5000 #连接超时5秒
        readTimeout: 30000 #读取超时30秒
        loggerLevel: basic #日志等级
  compression: #GZIP压缩
    request: #请求
      enabled: true #开启
      mime-types: text/xml,application/xml,application/json #开启支持压缩的MIME TYPE
      min-request-size: 2048 #配置压缩数据大小的下限
    response: #响应
      enabled: false #关闭响应GZIP压缩

mybatis-plus:
  mapper-locations: classpath*:/mapper/*Mapper.xml #包扫描xml
  typeAliasesPackage: com.dmall.mms.generator.entity  #实体扫描，多个package用逗号或者分号分隔
  check-config-location: true #启动时检查mybatis的xml
  global-config:
    # 数据库相关配置
    db-config:
      #主键类型  AUTO:"数据库ID自增", INPUT:"用户输入ID",ID_WORKER:"全局唯一ID (数字类型唯一ID)", UUID:"全局唯一ID UUID";
      id-type: AUTO
      #字段策略 IGNORED:"忽略判断",NOT_NULL:"非 NULL 判断"),NOT_EMPTY:"非空判断"
      insertStrategy: not_empty
      update-strategy: not_empty
      select-strategy: not_empty
  # 原生配置
  configuration:
    map-underscore-to-camel-case: true #驼峰命名
    cache-enabled: false #关闭缓存

dmall:
  mybatisplus:
    enabled: true
    performance: true
    basePackage: com.dmall.mms.generator.mapper
  swagger:
    enabled: true
    basePackage: com.dmall.service.impl.business
    title: dmall会员模块
    description: dmall会员模块，主要包含会员注册、登录、修改密码、地址管理等
    serviceUrl: http://www.dmall.com:8190
    version: 1.0.0
    contactName: 余杭
    contactUrl: http://www.dmall.com:7010/doc.html
    contactEmail: 649411629@qq.com
  cache:
    redis:
      enabled: true
      cacheKeyPrefix: dmall-service-impl-member
      ttlUnitEnum: DAY
      ttl: 1
      customCaches: [{name: demo}]





